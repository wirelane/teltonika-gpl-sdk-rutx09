(function(d,l){typeof exports=="object"&&typeof module<"u"?module.exports=l():typeof define=="function"&&define.amd?define(l):(d=typeof globalThis<"u"?globalThis:d||self,d["services/SambaUsers_js"]=l())})(this,function(){"use strict";function d(s,e,r,u,t,n,m,C){var a=typeof s=="function"?s.options:s;e&&(a.render=e,a.staticRenderFns=r,a._compiled=!0),u&&(a.functional=!0),n&&(a._scopeId="data-v-"+n);var i;if(m?(i=function(o){o=o||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!o&&typeof __VUE_SSR_CONTEXT__<"u"&&(o=__VUE_SSR_CONTEXT__),t&&t.call(this,o),o&&o._registeredComponents&&o._registeredComponents.add(m)},a._ssrRegister=i):t&&(i=C?function(){t.call(this,(a.functional?this.parent:this).$root.$options.shadowRoot)}:t),i)if(a.functional){a._injectStyles=i;var y=a.render;a.render=function(U,f){return i.call(f),y(U,f)}}else{var c=a.beforeCreate;a.beforeCreate=c?[].concat(c,i):[i]}return{exports:s,options:a}}const l={name:"SambaUserEdit",props:{section:{type:Object,required:!0}},methods:{isPasswordConfirmationCorrect(){return this.section.password!==this.section.passwordConfirm?{isValid:!1,message:this.$t("Given password confirmation did not match")}:{isValid:!0}}}};var p=function(){var e=this,r=e._self._c;return r("vuci-form",{attrs:{config:"samba",editing:""},scopedSlots:e._u([{key:"default",fn:function({uciData:u,editableSection:t}){return[r("vuci-named-section",{attrs:{"uci-data":u,title:e.$t("Change password"),name:t.id,addremove:"",endpoints:[{endpoint:"samba/users/config"}],"data-key":"users"},scopedSlots:e._u([{key:"default",fn:function({s:n}){return[r("vuci-form-item-input",{attrs:{"uci-section":n,name:"password",required:"",label:e.$t("New password"),help:e.$t("Password requirements: 8-32 characters, at least one uppercase letter,                                 one lowercase letter and one number"),password:"",maxlength:"32",minlength:"8",rules:"root_password"}}),r("vuci-form-item-input",{attrs:{"uci-section":n,name:"passwordConfirm",required:"",password:"","no-write":"",minlength:"8",maxlength:"32",label:e.$t("Confirm new password"),help:e.$t("Password requirements: 8-32 characters, at least one uppercase letter,                                 one lowercase letter and one number"),rules:["root_password",e.isPasswordConfirmationCorrect]}})]}}],null,!0)})]}}])})},h=[],_=d(l,p,h,!1,null,null,null,null);const w=_.exports,v={data(){return{formData:{},SambaUsersEditModal:w,usersColumns:[{name:"username",label:this.$t("Username")}],errors:{1:this.$t("Failed to create new system user."),2:this.$t("Failed to set new user password."),3:this.$t("Username is reserved"),4:this.$t("Username already in use.")}}},methods:{returnErrorMessage(s){const e=s.data.errors[0].code;return this.errors[e]||this.$t("Unexpected error")},addSection(s){return this.formData.users.some(r=>r.username===s.username)?{message:this.$t("User with username %s already exists").format(s.username),valid:!1}:{valid:!0}},isNotDublicate(s){return this.formData.users.some(e=>e.username===s)?{isValid:!1,message:this.$t("User with this username already exists")}:{isValid:!0}},sambaCredentialsValidate(s){return s.match(/^[a-z_].*/)?s.match(/^[a-z0-9_-]+$/)?{isValid:!0}:{isValid:!1,message:this.$t("Username can only contain lower case alphanumeric characters and '_' or '-'")}:{isValid:!1,message:this.$t("Username must start with a lower case character or '_'")}}}};var $=function(){var e=this,r=e._self._c;return r("vuci-form",{attrs:{config:"samba"},scopedSlots:e._u([{key:"default",fn:function({uciData:u}){return[r("vuci-typed-section",{attrs:{"uci-data":u,title:e.$t("Users"),type:"user",columns:e.usersColumns,"exception-options":["password"],"edit-form":e.SambaUsersEditModal,endpoints:[{endpoint:"samba/users/config"}],"data-key":"users","no-edit-after-create":"","add-validate":e.addSection,"form-methods":["create","get","delete"],"add-title":e.$t("Add new user"),"error-handlers":{create:e.returnErrorMessage}},scopedSlots:e._u([{key:"addForm",fn:function({addModel:t}){return[r("tlt-form-item-input",{attrs:{label:e.$t("Name"),prop:"username",maxlength:"8",required:"",rules:[e.isNotDublicate,e.sambaCredentialsValidate]},model:{value:t.username,callback:function(n){e.$set(t,"username",n)},expression:"addModel.username"}}),r("tlt-form-item-password",{attrs:{label:e.$t("Password"),prop:"password",maxlength:"130",minlength:"8",required:"",rules:"root_password"},model:{value:t.password,callback:function(n){e.$set(t,"password",n)},expression:"addModel.password"}})]}},{key:"username",fn:function({s:t}){return[r("vuci-form-item-dummy",{attrs:{"uci-section":t,name:"username","no-write":""}})]}}],null,!0)})]}}]),model:{value:e.formData,callback:function(u){e.formData=u},expression:"formData"}})},b=[],g=d(v,$,b,!1,null,null,null,null);return g.exports});
