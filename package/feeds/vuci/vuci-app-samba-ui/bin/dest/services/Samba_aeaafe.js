(function(w,E){typeof exports=="object"&&typeof module<"u"?module.exports=E():typeof define=="function"&&define.amd?define(E):(w=typeof globalThis<"u"?globalThis:w||self,w["services/Samba_js"]=E())})(this,function(){"use strict";/*!
 * vuex v3.6.2
 * (c) 2021 Evan You
 * @license MIT
 */function w(e){var t=Number(e.version.split(".")[0]);if(t>=2)e.mixin({beforeCreate:i});else{var r=e.prototype._init;e.prototype._init=function(n){n===void 0&&(n={}),n.init=n.init?[i].concat(n.init):i,r.call(this,n)}}function i(){var n=this.$options;n.store?this.$store=typeof n.store=="function"?n.store():n.store:n.parent&&n.parent.$store&&(this.$store=n.parent.$store)}}var E=typeof window<"u"?window:typeof global<"u"?global:{},$=E.__VUE_DEVTOOLS_GLOBAL_HOOK__;function I(e){$&&(e._devtoolHook=$,$.emit("vuex:init",e),$.on("vuex:travel-to-state",function(t){e.replaceState(t)}),e.subscribe(function(t,r){$.emit("vuex:mutation",t,r)},{prepend:!0}),e.subscribeAction(function(t,r){$.emit("vuex:action",t,r)},{prepend:!0}))}function b(e,t){Object.keys(e).forEach(function(r){return t(e[r],r)})}function A(e){return e!==null&&typeof e=="object"}function H(e){return e&&typeof e.then=="function"}function p(e,t){if(!e)throw new Error("[vuex] "+t)}function L(e,t){return function(){return e(t)}}var g=function(t,r){this.runtime=r,this._children=Object.create(null),this._rawModule=t;var i=t.state;this.state=(typeof i=="function"?i():i)||{}},D={namespaced:{configurable:!0}};D.namespaced.get=function(){return!!this._rawModule.namespaced},g.prototype.addChild=function(t,r){this._children[t]=r},g.prototype.removeChild=function(t){delete this._children[t]},g.prototype.getChild=function(t){return this._children[t]},g.prototype.hasChild=function(t){return t in this._children},g.prototype.update=function(t){this._rawModule.namespaced=t.namespaced,t.actions&&(this._rawModule.actions=t.actions),t.mutations&&(this._rawModule.mutations=t.mutations),t.getters&&(this._rawModule.getters=t.getters)},g.prototype.forEachChild=function(t){b(this._children,t)},g.prototype.forEachGetter=function(t){this._rawModule.getters&&b(this._rawModule.getters,t)},g.prototype.forEachAction=function(t){this._rawModule.actions&&b(this._rawModule.actions,t)},g.prototype.forEachMutation=function(t){this._rawModule.mutations&&b(this._rawModule.mutations,t)},Object.defineProperties(g.prototype,D);var y=function(t){this.register([],t,!1)};y.prototype.get=function(t){return t.reduce(function(r,i){return r.getChild(i)},this.root)},y.prototype.getNamespace=function(t){var r=this.root;return t.reduce(function(i,n){return r=r.getChild(n),i+(r.namespaced?n+"/":"")},"")},y.prototype.update=function(t){M([],this.root,t)},y.prototype.register=function(t,r,i){var n=this;i===void 0&&(i=!0),process.env.NODE_ENV!=="production"&&G(t,r);var o=new g(r,i);if(t.length===0)this.root=o;else{var a=this.get(t.slice(0,-1));a.addChild(t[t.length-1],o)}r.modules&&b(r.modules,function(l,s){n.register(t.concat(s),l,i)})},y.prototype.unregister=function(t){var r=this.get(t.slice(0,-1)),i=t[t.length-1],n=r.getChild(i);if(!n){process.env.NODE_ENV!=="production"&&console.warn("[vuex] trying to unregister module '"+i+"', which is not registered");return}n.runtime&&r.removeChild(i)},y.prototype.isRegistered=function(t){var r=this.get(t.slice(0,-1)),i=t[t.length-1];return r?r.hasChild(i):!1};function M(e,t,r){if(process.env.NODE_ENV!=="production"&&G(e,r),t.update(r),r.modules)for(var i in r.modules){if(!t.getChild(i)){process.env.NODE_ENV!=="production"&&console.warn("[vuex] trying to add a new module '"+i+"' on hot reloading, manual reload is needed");return}M(e.concat(i),t.getChild(i),r.modules[i])}}var T={assert:function(e){return typeof e=="function"},expected:"function"},z={assert:function(e){return typeof e=="function"||typeof e=="object"&&typeof e.handler=="function"},expected:'function or object with "handler" function'},j={getters:T,mutations:T,actions:z};function G(e,t){Object.keys(j).forEach(function(r){if(t[r]){var i=j[r];b(t[r],function(n,o){p(i.assert(n),q(e,r,o,n,i.expected))})}})}function q(e,t,r,i,n){var o=t+" should be "+n+' but "'+t+"."+r+'"';return e.length>0&&(o+=' in module "'+e.join(".")+'"'),o+=" is "+JSON.stringify(i)+".",o}var m,v=function e(t){var r=this;t===void 0&&(t={}),!m&&typeof window<"u"&&window.Vue&&Y(window.Vue),process.env.NODE_ENV!=="production"&&(p(m,"must call Vue.use(Vuex) before creating a store instance."),p(typeof Promise<"u","vuex requires a Promise polyfill in this browser."),p(this instanceof e,"store must be called with the new operator."));var i=t.plugins;i===void 0&&(i=[]);var n=t.strict;n===void 0&&(n=!1),this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new y(t),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._watcherVM=new m,this._makeLocalGettersCache=Object.create(null);var o=this,a=this,l=a.dispatch,s=a.commit;this.dispatch=function(d,h){return l.call(o,d,h)},this.commit=function(d,h,S){return s.call(o,d,h,S)},this.strict=n;var f=this._modules.root.state;N(this,f,[],this._modules.root),C(this,f),i.forEach(function(u){return u(r)});var c=t.devtools!==void 0?t.devtools:m.config.devtools;c&&I(this)},x={state:{configurable:!0}};x.state.get=function(){return this._vm._data.$$state},x.state.set=function(e){process.env.NODE_ENV!=="production"&&p(!1,"use store.replaceState() to explicit replace store state.")},v.prototype.commit=function(t,r,i){var n=this,o=O(t,r,i),a=o.type,l=o.payload,s=o.options,f={type:a,payload:l},c=this._mutations[a];if(!c){process.env.NODE_ENV!=="production"&&console.error("[vuex] unknown mutation type: "+a);return}this._withCommit(function(){c.forEach(function(d){d(l)})}),this._subscribers.slice().forEach(function(u){return u(f,n.state)}),process.env.NODE_ENV!=="production"&&s&&s.silent&&console.warn("[vuex] mutation type: "+a+". Silent option has been removed. Use the filter functionality in the vue-devtools")},v.prototype.dispatch=function(t,r){var i=this,n=O(t,r),o=n.type,a=n.payload,l={type:o,payload:a},s=this._actions[o];if(!s){process.env.NODE_ENV!=="production"&&console.error("[vuex] unknown action type: "+o);return}try{this._actionSubscribers.slice().filter(function(c){return c.before}).forEach(function(c){return c.before(l,i.state)})}catch(c){process.env.NODE_ENV!=="production"&&(console.warn("[vuex] error in before action subscribers: "),console.error(c))}var f=s.length>1?Promise.all(s.map(function(c){return c(a)})):s[0](a);return new Promise(function(c,u){f.then(function(d){try{i._actionSubscribers.filter(function(h){return h.after}).forEach(function(h){return h.after(l,i.state)})}catch(h){process.env.NODE_ENV!=="production"&&(console.warn("[vuex] error in after action subscribers: "),console.error(h))}c(d)},function(d){try{i._actionSubscribers.filter(function(h){return h.error}).forEach(function(h){return h.error(l,i.state,d)})}catch(h){process.env.NODE_ENV!=="production"&&(console.warn("[vuex] error in error action subscribers: "),console.error(h))}u(d)})})},v.prototype.subscribe=function(t,r){return R(t,this._subscribers,r)},v.prototype.subscribeAction=function(t,r){var i=typeof t=="function"?{before:t}:t;return R(i,this._actionSubscribers,r)},v.prototype.watch=function(t,r,i){var n=this;return process.env.NODE_ENV!=="production"&&p(typeof t=="function","store.watch only accepts a function."),this._watcherVM.$watch(function(){return t(n.state,n.getters)},r,i)},v.prototype.replaceState=function(t){var r=this;this._withCommit(function(){r._vm._data.$$state=t})},v.prototype.registerModule=function(t,r,i){i===void 0&&(i={}),typeof t=="string"&&(t=[t]),process.env.NODE_ENV!=="production"&&(p(Array.isArray(t),"module path must be a string or an Array."),p(t.length>0,"cannot register the root module by using registerModule.")),this._modules.register(t,r),N(this,this.state,t,this._modules.get(t),i.preserveState),C(this,this.state)},v.prototype.unregisterModule=function(t){var r=this;typeof t=="string"&&(t=[t]),process.env.NODE_ENV!=="production"&&p(Array.isArray(t),"module path must be a string or an Array."),this._modules.unregister(t),this._withCommit(function(){var i=k(r.state,t.slice(0,-1));m.delete(i,t[t.length-1])}),P(this)},v.prototype.hasModule=function(t){return typeof t=="string"&&(t=[t]),process.env.NODE_ENV!=="production"&&p(Array.isArray(t),"module path must be a string or an Array."),this._modules.isRegistered(t)},v.prototype.hotUpdate=function(t){this._modules.update(t),P(this,!0)},v.prototype._withCommit=function(t){var r=this._committing;this._committing=!0,t(),this._committing=r},Object.defineProperties(v.prototype,x);function R(e,t,r){return t.indexOf(e)<0&&(r&&r.prepend?t.unshift(e):t.push(e)),function(){var i=t.indexOf(e);i>-1&&t.splice(i,1)}}function P(e,t){e._actions=Object.create(null),e._mutations=Object.create(null),e._wrappedGetters=Object.create(null),e._modulesNamespaceMap=Object.create(null);var r=e.state;N(e,r,[],e._modules.root,!0),C(e,r,t)}function C(e,t,r){var i=e._vm;e.getters={},e._makeLocalGettersCache=Object.create(null);var n=e._wrappedGetters,o={};b(n,function(l,s){o[s]=L(l,e),Object.defineProperty(e.getters,s,{get:function(){return e._vm[s]},enumerable:!0})});var a=m.config.silent;m.config.silent=!0,e._vm=new m({data:{$$state:t},computed:o}),m.config.silent=a,e.strict&&Q(e),i&&(r&&e._withCommit(function(){i._data.$$state=null}),m.nextTick(function(){return i.$destroy()}))}function N(e,t,r,i,n){var o=!r.length,a=e._modules.getNamespace(r);if(i.namespaced&&(e._modulesNamespaceMap[a]&&process.env.NODE_ENV!=="production"&&console.error("[vuex] duplicate namespace "+a+" for the namespaced module "+r.join("/")),e._modulesNamespaceMap[a]=i),!o&&!n){var l=k(t,r.slice(0,-1)),s=r[r.length-1];e._withCommit(function(){process.env.NODE_ENV!=="production"&&s in l&&console.warn('[vuex] state field "'+s+'" was overridden by a module with the same name at "'+r.join(".")+'"'),m.set(l,s,i.state)})}var f=i.context=W(e,a,r);i.forEachMutation(function(c,u){var d=a+u;Z(e,d,c,f)}),i.forEachAction(function(c,u){var d=c.root?u:a+u,h=c.handler||c;J(e,d,h,f)}),i.forEachGetter(function(c,u){var d=a+u;K(e,d,c,f)}),i.forEachChild(function(c,u){N(e,t,r.concat(u),c,n)})}function W(e,t,r){var i=t==="",n={dispatch:i?e.dispatch:function(o,a,l){var s=O(o,a,l),f=s.payload,c=s.options,u=s.type;if((!c||!c.root)&&(u=t+u,process.env.NODE_ENV!=="production"&&!e._actions[u])){console.error("[vuex] unknown local action type: "+s.type+", global type: "+u);return}return e.dispatch(u,f)},commit:i?e.commit:function(o,a,l){var s=O(o,a,l),f=s.payload,c=s.options,u=s.type;if((!c||!c.root)&&(u=t+u,process.env.NODE_ENV!=="production"&&!e._mutations[u])){console.error("[vuex] unknown local mutation type: "+s.type+", global type: "+u);return}e.commit(u,f,c)}};return Object.defineProperties(n,{getters:{get:i?function(){return e.getters}:function(){return X(e,t)}},state:{get:function(){return k(e.state,r)}}}),n}function X(e,t){if(!e._makeLocalGettersCache[t]){var r={},i=t.length;Object.keys(e.getters).forEach(function(n){if(n.slice(0,i)===t){var o=n.slice(i);Object.defineProperty(r,o,{get:function(){return e.getters[n]},enumerable:!0})}}),e._makeLocalGettersCache[t]=r}return e._makeLocalGettersCache[t]}function Z(e,t,r,i){var n=e._mutations[t]||(e._mutations[t]=[]);n.push(function(a){r.call(e,i.state,a)})}function J(e,t,r,i){var n=e._actions[t]||(e._actions[t]=[]);n.push(function(a){var l=r.call(e,{dispatch:i.dispatch,commit:i.commit,getters:i.getters,state:i.state,rootGetters:e.getters,rootState:e.state},a);return H(l)||(l=Promise.resolve(l)),e._devtoolHook?l.catch(function(s){throw e._devtoolHook.emit("vuex:error",s),s}):l})}function K(e,t,r,i){if(e._wrappedGetters[t]){process.env.NODE_ENV!=="production"&&console.error("[vuex] duplicate getter key: "+t);return}e._wrappedGetters[t]=function(o){return r(i.state,i.getters,o.state,o.getters)}}function Q(e){e._vm.$watch(function(){return this._data.$$state},function(){process.env.NODE_ENV!=="production"&&p(e._committing,"do not mutate vuex store state outside mutation handlers.")},{deep:!0,sync:!0})}function k(e,t){return t.reduce(function(r,i){return r[i]},e)}function O(e,t,r){return A(e)&&e.type&&(r=t,t=e,e=e.type),process.env.NODE_ENV!=="production"&&p(typeof e=="string","expects string as the type, but found "+typeof e+"."),{type:e,payload:t,options:r}}function Y(e){if(m&&e===m){process.env.NODE_ENV!=="production"&&console.error("[vuex] already installed. Vue.use(Vuex) should be called only once.");return}m=e,w(m)}var tt=B(function(e,t){var r={};return process.env.NODE_ENV!=="production"&&!V(t)&&console.error("[vuex] mapState: mapper parameter must be either an Array or an Object"),U(t).forEach(function(i){var n=i.key,o=i.val;r[n]=function(){var l=this.$store.state,s=this.$store.getters;if(e){var f=F(this.$store,"mapState",e);if(!f)return;l=f.context.state,s=f.context.getters}return typeof o=="function"?o.call(this,l,s):l[o]},r[n].vuex=!0}),r}),et=B(function(e,t){var r={};return process.env.NODE_ENV!=="production"&&!V(t)&&console.error("[vuex] mapGetters: mapper parameter must be either an Array or an Object"),U(t).forEach(function(i){var n=i.key,o=i.val;o=e+o,r[n]=function(){if(!(e&&!F(this.$store,"mapGetters",e))){if(process.env.NODE_ENV!=="production"&&!(o in this.$store.getters)){console.error("[vuex] unknown getter: "+o);return}return this.$store.getters[o]}},r[n].vuex=!0}),r});function U(e){return V(e)?Array.isArray(e)?e.map(function(t){return{key:t,val:t}}):Object.keys(e).map(function(t){return{key:t,val:e[t]}}):[]}function V(e){return Array.isArray(e)||A(e)}function B(e){return function(t,r){return typeof t!="string"?(r=t,t=""):t.charAt(t.length-1)!=="/"&&(t+="/"),e(t,r)}}function F(e,t,r){var i=e._modulesNamespaceMap[r];return process.env.NODE_ENV!=="production"&&!i&&console.error("[vuex] module namespace not found in "+t+"(): "+r),i}const _={_initializeTimer(e){return{id:0,method:e.method,time:e.time||1e3,immediate:e.immediate,force:e.force,autostart:e.autostart,edit:e.edit,spinner:e.spinner,isRunning:!1,destroyed:!1}},_getTimer(e,t){let r;switch(typeof t){case"function":r=e[t.name],r.autostart=!0;break;case"string":r=e[t],r.autostart=!0;break;default:if(!t.method)throw new Error("[timer]: method cannot be resumed, because it was not defined previously.");if(typeof t.method!="function")throw new Error("[timer]: provided method must be a function.");e[t.method.name]?(r=e[t.method.name],r.autostart=!0):(e[t.method.name]=this._initializeTimer(t),r=e[t.method.name])}return r},_filterTimers(e,t){let r=Object.values(t).filter(i=>i.autostart);switch(e){case"edit":r=r.filter(i=>!i.edit);break;case"spinner":r=r.filter(i=>!i.spinner);break}return r},_syncTimer(e){e.id=setTimeout((async function t(){e.isRunning&&(await e.method(),e.id=setTimeout(t.bind(this),e.time))}).bind(this),this._immediateStart(e))},_asyncTimer(e){e.id=setTimeout(()=>{e.isRunning&&(e.id=setInterval(()=>e.method(),e.time))},this._immediateStart(e))},_immediateStart(e){return e.immediate?0:e.time}},rt={methods:{timer(){let e={};this.$timer={start:t=>{const r=_._getTimer(e,t);r.isRunning||!r.autostart||r.destroyed||(r.isRunning=!0,r.force?_._asyncTimer(r):_._syncTimer(r))},stop:t=>{const r=_._getTimer(e,t);r&&(r.isRunning=!1,r.force?clearInterval(r.id):clearTimeout(r.id))},destroy:t=>{const r=_._getTimer(e,t);r&&(r.destroyed=!0)},update:t=>{const r=_._getTimer(e,t);if(!r)throw new Error("[timer]: cannot update a non existing timer.");r.isRunning&&this.$timer.stop(r.method),e[t.method.name]=_._initializeTimer(t),this.$timer.start(r.method)},stopAll:t=>{const r=_._filterTimers(t,e);r.length!==0&&r.forEach(i=>this.$timer.stop(i.method))},startAll:t=>{const r=_._filterTimers(t,e);r.length!==0&&r.forEach(i=>this.$timer.start(i.method))},destroyAll:t=>{Object.values(e).forEach(r=>this.$timer.destroy(r.method)),this.$timer.stopAll()},clear:()=>{this.$timer.stopAll(),e={}}}}},computed:{...et(["modalOpen"]),...tt(["spinning"])},watch:{modalOpen(e){e?this.$timer.stopAll("edit"):this.$timer.startAll("edit")},spinning(e){this.modalOpen||(e?this.$timer.stopAll("spinner"):this.$timer.startAll("spinner"))}},created(){this.timer()},beforeDestroy(){this.$timer.destroyAll()}};function it(e,t,r,i,n,o,a,l){var s=typeof e=="function"?e.options:e;t&&(s.render=t,s.staticRenderFns=r,s._compiled=!0),i&&(s.functional=!0),o&&(s._scopeId="data-v-"+o);var f;if(a?(f=function(d){d=d||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!d&&typeof __VUE_SSR_CONTEXT__<"u"&&(d=__VUE_SSR_CONTEXT__),n&&n.call(this,d),d&&d._registeredComponents&&d._registeredComponents.add(a)},s._ssrRegister=f):n&&(f=l?function(){n.call(this,(s.functional?this.parent:this).$root.$options.shadowRoot)}:n),f)if(s.functional){s._injectStyles=f;var c=s.render;s.render=function(h,S){return f.call(S),c(h,S)}}else{var u=s.beforeCreate;s.beforeCreate=u?[].concat(u,f):[f]}return{exports:e,options:s}}const nt={mixins:[rt],data(){return{directoriesColumns:[{name:"name",label:this.$t("Name"),help:this.$t("Name of the shared directory")},{name:"path",label:this.$t("Path"),help:this.$t("Path to the shared directory. To share an entire drive, choose an automatically generated path from this drop-down box.")},{name:"users",label:this.$t("Allowed users"),help:this.$t("Defines which users can access the shared directory. Users can be created from the User tab.")},{name:"read_only",label:this.$t("Read-only"),help:this.$t("Makes the directory read-only, which means the shared directory can only be accessed to view and read files")},{name:"browseable",label:this.$t("Browseable"),help:this.$t("This controls whether this share is seen in the list of available shares in a net view and in the browse list")},{name:"guest_ok",label:this.$t("Allow guests"),help:this.$t("Enables guest access, which allows anonymous connections to the shared directory. If at least one user is selected this option will not work.")}],areaValue:[],users:[],devices:[],formData:{},showModal:!1,networks:[],samba:{status:!1,activeSessions:[]},noMountPoint:[["",this.$t("No mount point")]]}},computed:{usernames(){return this.users.map(e=>e.username)},mountpoints(){return this.devices.map(t=>t.mountpoint).filter(t=>t)},userExist(){return this.usernames.length>0},networkOptions(){return this.networks.filter(e=>e.area_type==="lan").map(this.$network.getName)},formatedConfig(){return this.areaValue.join(`
`)},service(){return this.samba}},mounted(){this.$timer.start({method:this.updateStatus,time:5e3,autostart:!1,immediate:!0})},methods:{loadData(){const e=["/usb_tools/mount/options","/samba/users/config","/samba/status/","/api/interfaces/config"];return this.$axios.bulkGet(e).then(([t,r,i,n])=>{t.success||this.$message.error(this.$t("Failed to load mount data")),r.success||this.$message.error(this.$t("Failed to load user data")),i.success||this.$message.error(this.$t("Failed to load status data")),n.success||this.$message.error(this.$t("Failed to load networks data")),this.users=r.success?r.data:[],this.devices=t.success?t.data:[],this.samba.status=!!i.data.running,this.areaValue=i.success?i.data.config_file:[],this.samba.activeSessions=i.success?i.data.active_sessions:[],this.networks=n.data}).catch(()=>{this.$message.error(this.$t("Unexpected error"))}).finally(()=>{this.$timer.start(this.updateStatus)})},updateStatus(){this.$axios.get("/api/samba/status").then(({data:e})=>{this.samba.status=e.running,this.samba.activeSessions=e.active_sessions}).catch(()=>{this.$message.error(this.$t("Failed to load status"))})},getStatusHints(e){return e.map(t=>({info:t}))},validateCustom(e){if(!/^[a-zA-Z0-9 ]+=[^?]*$/g.test(e))return{isValid:!1,message:this.$t("Following format is accepted: [a-Z0-9] = [all characters are allowed except ?]")};const r=["netbios name","display charset","interfaces","server string","unix charset","workgroup"].find(i=>new RegExp(`^ *${i.replaceAll(" "," +")} *=`).test(e));return r?{isValid:!1,message:this.$t("Custom value '%s' is not allowed").format(r)}:{isValid:!0}},openConfig(){this.showModal=!0,this.$spin();const e=setInterval(()=>this.$axios.get("/api/samba/status").then(({data:t})=>{t.config_file.length&&(clearInterval(e),this.areaValue=t.config_file,this.$spin(!1))}).catch(()=>{this.$message.error(this.$t("An unexpected error occurred"))}),500)},closeModal(){this.showModal=!1},onBeforeSave(){return new Promise((e,t)=>{this.formData.shares.some(i=>this.formData.shares.some(n=>n.name===i.name&&n.id!==i.id))&&t(this.$t("Instance with the same name already exists")),e()})},returnErrorMessage(e){const t=e.payload.some(i=>i.errors.some(n=>n.code===2)),r=e.payload.some(i=>i.errors.some(n=>n.code===1));return t?this.$t("Selected USB drive path does not exist"):r?this.$t("Selected USB drive path is not a directory"):this.$t("Unexpected error")}}};var ot=function(){var t=this,r=t._self._c;return r("vuci-form",{attrs:{config:"samba","before-save":t.onBeforeSave,"after-load":t.loadData},scopedSlots:t._u([{key:"default",fn:function({uciData:i}){return[r("vuci-named-section",{attrs:{"uci-data":i,title:t.$t("Samba"),help:t.$t("Samba is a software solution for using the Server Message Block (SMB) networking protocol, which provides shared file access between nodes on a computer network."),endpoints:[{endpoint:"samba/global",sectionFilter:n=>n[0]}],"data-key":"samba"},scopedSlots:t._u([{key:"default",fn:function({s:n}){return[r("tlt-form-model-item",{attrs:{label:t.$t("Samba status:"),name:"status"}},[r("tlt-dummy-value",{class:t.service.status?"success":"error",attrs:{value:t.service.status?t.$t("Active"):t.$t("Inactive")}})],1),r("tlt-form-model-item",{attrs:{label:t.$t("Active sessions"),name:"activeSessions"}},[r("div",{staticClass:"flex items-center"},[r("tlt-dummy-value",{attrs:{value:t.service.activeSessions?t.service.activeSessions.length:"0"}}),r("tlt-hint",{attrs:{"break-words":"",hints:t.getStatusHints(t.service.activeSessions)}},[t.service.activeSessions.length?r("tlt-icon",{staticClass:"ml-1 text-primary-300",attrs:{icon:"info"}}):t._e()],1)],1)]),r("vuci-form-item-switch",{attrs:{"uci-section":n,label:t.$t("Enable"),help:t.$t("Toggles Samba ON or OFF"),name:"enabled"}}),r("vuci-form-item-input",{attrs:{"uci-section":n,label:t.$t("Hostname"),help:t.$t("Name of the Samba server"),name:"name",rules:"string"}}),r("vuci-form-item-input",{attrs:{"uci-section":n,label:t.$t("Description"),help:t.$t("Short server description"),name:"description",rules:"string"}}),r("vuci-form-item-input",{attrs:{"uci-section":n,label:t.$t("Workgroup"),help:t.$t("Name of the server's workgroup"),name:"workgroup"}}),r("vuci-form-item-switch",{attrs:{"uci-section":n,label:t.$t("Share home-directories"),help:t.$t("Allow system users to reach their home directories via network shares"),name:"homes"}}),r("vuci-form-item-select",{attrs:{"uci-section":n,name:"interface",label:t.$t("Interfaces"),help:t.$t("Bind samba server to specified interfaces"),options:t.networkOptions,multiple:"",placeholder:t.$t("-- Please select --")}}),r("vuci-form-item-list",{attrs:{"uci-section":n,name:"custom",label:t.$t("Insert custom configuration to config"),placeholder:t.$t("e.g. min receive file size = 16384"),prop:"areaValue",rules:t.validateCustom}}),r("tlt-form-model-item",[r("tlt-button",{attrs:{"button-class":"btn tertiary-btn"},on:{click:t.openConfig}},[t._v(" "+t._s(t.$t("View config file"))+" ")])],1),t.showModal?r("tlt-modal",{ref:"tltModal",on:{close:t.closeModal}},[r("tlt-card",{attrs:{title:t.$t("Config"),help:t.$t("This is the content of the file '/etc/samba/smb.conf.template' from which your samba configuration will be generated.")}},[r("tlt-text-area",{attrs:{"custom-id":"template",rows:"30",readonly:""},model:{value:t.formatedConfig,callback:function(o){t.formatedConfig=o},expression:"formatedConfig"}})],1)],1):t._e()]}}],null,!0)}),r("vuci-typed-section",{attrs:{"uci-data":i,type:"sambashare",title:t.$t("Shared Directories"),help:t.$t("Please add directories to share. Each directory refers to a folder on a mounted device."),columns:t.directoriesColumns,endpoints:[{endpoint:"samba/shares/config"}],"data-key":"shares","error-handlers":{edit:t.returnErrorMessage},"fixed-table":""},scopedSlots:t._u([{key:"name",fn:function({s:n}){return[r("vuci-form-item-input",{attrs:{"uci-section":n,name:"name",rules:"string",required:""}})]}},{key:"path",fn:function({s:n}){return[r("vuci-form-item-select",{attrs:{"uci-section":n,name:"path",options:t.mountpoints.concat(t.noMountPoint),placeholder:"/mnt/","allow-create":"",required:""}})]}},{key:"users",fn:function({s:n}){return[r("vuci-form-item-select",{attrs:{"uci-section":n,name:"users",options:t.usernames,readonly:!t.userExist,multiple:"",placeholder:t.userExist?"":t.$t("No available users")}})]}},{key:"read_only",fn:function({s:n}){return[r("vuci-form-item-switch",{attrs:{"uci-section":n,name:"read_only"}})]}},{key:"browseable",fn:function({s:n}){return[r("vuci-form-item-switch",{attrs:{"uci-section":n,name:"browseable"}})]}},{key:"guest_ok",fn:function({s:n}){return[r("vuci-form-item-switch",{attrs:{"uci-section":n,name:"guest_ok"}})]}}],null,!0)})]}}]),model:{value:t.formData,callback:function(i){t.formData=i},expression:"formData"}})},st=[],at=it(nt,ot,st,!1,null,null,null,null);return at.exports});
