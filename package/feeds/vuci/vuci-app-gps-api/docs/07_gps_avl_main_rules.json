{
  "openapi": "3.0.0",
  "info": {
    "title": "GPS Documentation",
    "version": "1.0",
    "contact": {},
    "description": "GPS Api documentation"
  },
  "tags": [
    {
      "name": "AVL Main Rules"
    }
  ],
  "paths": {
    "/gps/avl/main_rules/config": {
      "get": {
        "summary": "Get GPS AVL Main configurations",
        "tags": [
          "AVL Main Rules"
        ],
        "responses": {
          "200": {
            "$ref": "#/components/responses/200gps_avl_main_rule_multi"
          }
        }
      },
      "put": {
        "summary": "Update GPS AVL Main configurations",
        "responses": {
          "200": {
            "$ref": "#/components/responses/200gps_avl_main_rule_multi"
          },
          "404": {
            "$ref": "#/components/responses/404response"
          },
          "422": {
            "$ref": "#/components/responses/422response"
          }
        },
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "data": {
                    "type": "array",
                    "items": {
                      "$ref": "#/components/schemas/gps_avl_main_rule_options"
                    }
                  }
                }
              }
            }
          }
        },
        "tags": [
          "AVL Main Rules"
        ]
      },
      "x-web": {
        "name": "GPS",
        "menu": [
          "Services",
          "GPS",
          "AVL"
        ],
        "hw_tags": {
          "gps": true
        }
      }
    },
    "/gps/avl/main_rules/config/{id}": {
      "parameters": [
        {
          "schema": {
            "type": "string"
          },
          "name": "id",
          "in": "path",
          "required": true,
          "description": "AVL Main configuration identifier"
        }
      ],
      "get": {
        "summary": "Get GPS AVL Main configuration",
        "tags": [
          "AVL Main Rules"
        ],
        "responses": {
          "200": {
            "$ref": "#/components/responses/200gps_avl_main_rule"
          },
          "404": {
            "$ref": "#/components/responses/404response"
          }
        }
      },
      "put": {
        "summary": "Update GPS AVL Main configuration",
        "responses": {
          "200": {
            "$ref": "#/components/responses/200gps_avl_main_rule"
          },
          "404": {
            "$ref": "#/components/responses/404response"
          },
          "422": {
            "$ref": "#/components/responses/422response"
          }
        },
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "data": {
                    "$ref": "#/components/schemas/gps_avl_main_rule_single_options"
                  }
                }
              }
            }
          }
        },
        "tags": [
          "AVL Main Rules"
        ]
      },
      "x-web": {
        "name": "GPS",
        "menu": [
          "Services",
          "GPS",
          "AVL"
        ],
        "hw_tags": {
          "gps": true
        }
      }
    }
  },
  "components": {
    "schemas": {
      "gps_avl_main_rule_single_options": {
        "description": "The Main rule section defines how and when GPS data will be collected and sent to a specified AVL server.",
        "type": "object",
        "properties": {
          "priority": {
            "type": "string",
            "description": "The rule's priority. Different priority settings add different flags to event packets, so they can be displayed differently in the receiving system. The router sends data of higher priority first.",
            "enum": [
              "low",
              "high",
              "panic",
              "security"
            ],
            "x-web": {
              "pretty": "Priority",
              "enum-pretty": {
                "low": "Low",
                "high": "High",
                "panic": "Panic",
                "security": "Security"
              },
              "input-type": "select"
            }
          },
          "collect_period": {
            "type": "string",
            "description": "Period (in seconds) for data collection",
            "format": "irange(1,999999)",
            "default": "5",
            "x-web": {
              "pretty": "Collect period",
              "input-type": "input"
            }
          },
          "distance": {
            "type": "string",
            "description": "Minimal distance (in meters) change in saved records to send",
            "format": "irange(1,999999)",
            "default": "200",
            "x-web": {
              "pretty": "Min distance",
              "input-type": "input"
            }
          },
          "angle": {
            "type": "string",
            "description": "Minimal angle change in Degrees",
            "format": "irange(1,360)",
            "default": "30",
            "x-web": {
              "pretty": "Min angle",
              "input-type": "input"
            }
          },
          "saved_records": {
            "type": "string",
            "description": "Minimal saved records count to send",
            "format": "irange(1,32)",
            "default": "20",
            "x-web": {
              "pretty": "Min saved records",
              "input-type": "input"
            }
          },
          "send_period": {
            "type": "string",
            "description": "Send period (in seconds) for data sending",
            "format": "irange(1,999999)",
            "default": "50",
            "x-web": {
              "pretty": "Send period",
              "input-type": "input"
            }
          },
          "accuracy": {
            "type": "string",
            "description": "Minimum accuracy (in meters) required before saving record. The lower the accuracy value, the better.",
            "format": "irange(1,999999)",
            "default": "10",
            "x-web": {
              "pretty": "Min accuracy",
              "input-type": "input"
            }
          }
        },
        "required": [
          "priority",
          "collect_period",
          "distance",
          "angle",
          "saved_records",
          "send_period",
          "accuracy"
        ]
      },
      "gps_avl_main_rule_options": {
        "allOf": [
          {
            "type": "object",
            "properties": {
              "id": {
                "type": "string"
              }
            },
            "required": [
              "id"
            ]
          },
          {
            "$ref": "#/components/schemas/gps_avl_main_rule_single_options"
          }
        ]
      }
    },
    "responses": {
      "200gps_avl_main_rule": {
        "description": "Returns configuration",
        "content": {
          "application/json": {
            "schema": {
              "type": "object",
              "properties": {
                "success": {
                  "type": "boolean",
                  "description": "Operation status"
                },
                "data": {
                  "$ref": "#/components/schemas/gps_avl_main_rule_options"
                }
              }
            }
          }
        }
      },
      "200gps_avl_main_rule_multi": {
        "description": "Returns configurations",
        "content": {
          "application/json": {
            "schema": {
              "type": "object",
              "properties": {
                "success": {
                  "type": "boolean",
                  "description": "Operation status"
                },
                "data": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/gps_avl_main_rule_options"
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}
