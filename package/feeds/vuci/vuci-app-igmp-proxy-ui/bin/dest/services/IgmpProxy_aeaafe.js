(function(l,u){typeof exports=="object"&&typeof module<"u"?module.exports=u():typeof define=="function"&&define.amd?define(u):(l=typeof globalThis<"u"?globalThis:l||self,l["services/IgmpProxy_js"]=u())})(this,function(){"use strict";function l(r,e,t,i,n,c,f,$){var o=typeof r=="function"?r.options:r;e&&(o.render=e,o.staticRenderFns=t,o._compiled=!0),i&&(o.functional=!0),c&&(o._scopeId="data-v-"+c);var s;if(f?(s=function(a){a=a||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!a&&typeof __VUE_SSR_CONTEXT__<"u"&&(a=__VUE_SSR_CONTEXT__),n&&n.call(this,a),a&&a._registeredComponents&&a._registeredComponents.add(f)},o._ssrRegister=s):n&&(s=$?function(){n.call(this,(o.functional?this.parent:this).$root.$options.shadowRoot)}:n),s)if(o.functional){o._injectStyles=s;var k=o.render;o.render=function(z,d){return s.call(d),k(z,d)}}else{var m=o.beforeCreate;o.beforeCreate=m?[].concat(m,s):[s]}return{exports:r,options:o}}const u={inject:["formOptions"],props:{section:{type:Object,required:!0}},data(){return{formData:{},directionHint:this.$t(`%sUpstream%s - The upstream network interface is the outgoing
        interface which is responsible for communicating to available multicast
        data sources. There can only be one upstream interface. %s
        %sDownstream%s - Downstream network interfaces are the distribution
        interfaces to the destination networks, where multicast clients can
        join groups and receive multicast data. One or more downstream interfaces
        must be configured.`).format("<b>","</b>","<br>","<b>","</b>")}},computed:{interfaceOpts(){return this.formOptions().interfaces},zoneOpts(){return this.formOptions().zones}},methods:{onBeforeSave(){return new Promise((r,e)=>{this.section.direction!=="upstream"&&r(),this.formData.igmpproxy.some(i=>i.id!==this.section.id&&i.direction==="upstream")&&e(this.$t("Only a single instance with upstream direction can be saved.")),r()})}}};var p=function(){var e=this,t=e._self._c;return t("vuci-form",{attrs:{config:"igmpproxy","before-save":e.onBeforeSave,editing:""},scopedSlots:e._u([{key:"default",fn:function({uciData:i,editableSection:n}){return[t("vuci-named-section",{attrs:{"uci-data":i,"data-key":"igmpproxy",name:n.id,title:e.$t("Routing interface"),endpoints:[{endpoint:"igmp_proxy/routes/config"}]},scopedSlots:e._u([{key:"default",fn:function({s:c}){return[t("vuci-form-item-select",{ref:"direction",attrs:{"uci-section":c,name:"direction",label:e.$t("Direction"),help:e.directionHint,options:[["upstream",e.$t("Upstream")],["downstream",e.$t("Downstream")]],rawhtml:""}}),t("vuci-form-item-select",{attrs:{"uci-section":c,name:"network",label:e.$t("Interface"),help:e.$t("The name of the interface the settings are for."),options:e.interfaceOpts}}),t("vuci-form-item-select",{attrs:{"uci-section":c,name:"zone",label:e.$t("Firewall zone"),help:e.$t("Name of a firewall zone this interface belongs to."),options:e.zoneOpts}}),t("vuci-form-item-list",{attrs:{"uci-section":c,name:"altnet",label:e.$t("Networks"),help:e.$t("A list of CIDR-masked Network entries         to control what subnets are allowed to have their         multicast data proxied. Multiple subnets can be         configured or 0.0.0.0/0 specified to allow any         network. Option can be omitted entirely to only         allow same network as configured on interface."),rules:"subnet4",placeholder:"0.0.0.0/0"}})]}}],null,!0)})]}}]),model:{value:e.formData,callback:function(i){e.formData=i},expression:"formData"}})},h=[],g=l(u,p,h,!1,null,null,null,null);const _=g.exports,w={provide(){return{formOptions:this.getFormData}},data(){return{interfaces:[],zones:[],igmpProxy:_,streamColumns:[{name:"direction",label:this.$t("Direction"),rawhtml:!0,help:this.$t(`%sUpstream%s - The upstream network interface is the outgoing
          interface which is responsible for communicating to available multicast
          data sources. There can only be one upstream interface. %s
          %sDownstream%s - Downstream network interfaces are the distribution
          interfaces to the destination networks, where multicast clients can
          join groups and receive multicast data. One or more downstream interfaces
          must be configured.`).format("<b>","</b>","<br>","<b>","</b>")},{name:"network",label:this.$t("Interface"),help:this.$t("The name of the interface the settings are for.")},{name:"zone",label:this.$t("Firewall zone"),help:this.$t("Name of a firewall zone this interface belongs to.")},{name:"altnet",label:this.$t("Networks"),help:this.$t(`A list of CIDR-masked Network entries
          to control what subnets are allowed to have their
          multicast data proxied. Multiple subnets can be
          configured or 0.0.0.0/0 specified to allow any
          network. Option can be omitted entirely to only
          allow same network as configured on interface.`)}]}},methods:{afterLoad(){const r=["/api/interfaces/config","/api/firewall/zones/config"];return this.$axios.bulkGet(r).then(([e,t])=>{e.success?this.interfaces=e.data.filter(i=>i.id!=="loopback"&&["dhcp","dhcpv6","static"].includes(i.proto)).map(this.$network.getName):this.$message.error(this.$t("Failed to load interface data")),t.success?this.zones=t.data.map(i=>i.name):this.$message.error(this.$t("Failed to load firewall zone data"))}).catch(()=>{this.$message.error(this.$t("An unexpected error occurred"))})},getFormData(){return{interfaces:this.interfaces,zones:this.zones}}}};var b=function(){var e=this,t=e._self._c;return t("vuci-form",{attrs:{config:"igmpproxy","after-load":e.afterLoad},scopedSlots:e._u([{key:"default",fn:function({uciData:i}){return[t("vuci-named-section",{attrs:{"uci-data":i,"data-key":"igmpproxy_general",title:e.$t("General IGMP Proxy Settings"),endpoints:[{endpoint:"igmp_proxy/global"}]},scopedSlots:e._u([{key:"default",fn:function({s:n}){return[t("vuci-form-item-switch",{attrs:{"uci-section":n,name:"enabled",label:e.$t("Enable")}}),t("vuci-form-item-switch",{attrs:{"uci-section":n,name:"quickleave",label:e.$t("Quickleave"),help:e.$t("In this mode the daemon will send       a Leave IGMP message upstream as soon as it       receives a Leave message for any downstream interface."),rmempty:!1}})]}}],null,!0)}),t("vuci-typed-section",{attrs:{"uci-data":i,"data-key":"igmpproxy",type:"phyint",title:e.$t("Routing interfaces configuration"),columns:e.streamColumns,"edit-form":e.igmpProxy,endpoints:[{endpoint:"igmp_proxy/routes/config"}]},scopedSlots:e._u([{key:"direction",fn:function({s:n}){return[t("vuci-form-item-dummy",{attrs:{"uci-section":n,name:"direction",options:[["upstream",e.$t("Upstream")],["downstream",e.$t("Downstream")]]}})]}},{key:"network",fn:function({s:n}){return[n.network?t("zone-badge",{attrs:{name:n.network}}):[e._v(" - ")]]}},{key:"zone",fn:function({s:n}){return[n.zone?t("zone-badge",{attrs:{name:n.zone}}):[e._v(" - ")]]}},{key:"altnet",fn:function({s:n}){return[t("vuci-form-item-dummy",{attrs:{"uci-section":n,name:"altnet"}})]}}],null,!0)})]}}])})},v=[],y=l(w,b,v,!1,null,null,null,null);return y.exports});
