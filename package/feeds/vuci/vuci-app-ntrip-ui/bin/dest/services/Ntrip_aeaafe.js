(function($,E){typeof exports=="object"&&typeof module<"u"?module.exports=E():typeof define=="function"&&define.amd?define(E):($=typeof globalThis<"u"?globalThis:$||self,$["services/Ntrip_js"]=E())})(this,function(){"use strict";/*!
 * vuex v3.6.2
 * (c) 2021 Evan You
 * @license MIT
 */function $(t){var e=Number(t.version.split(".")[0]);if(e>=2)t.mixin({beforeCreate:n});else{var i=t.prototype._init;t.prototype._init=function(r){r===void 0&&(r={}),r.init=r.init?[n].concat(r.init):n,i.call(this,r)}}function n(){var r=this.$options;r.store?this.$store=typeof r.store=="function"?r.store():r.store:r.parent&&r.parent.$store&&(this.$store=r.parent.$store)}}var E=typeof window<"u"?window:typeof global<"u"?global:{},y=E.__VUE_DEVTOOLS_GLOBAL_HOOK__;function F(t){y&&(t._devtoolHook=y,y.emit("vuex:init",t),y.on("vuex:travel-to-state",function(e){t.replaceState(e)}),t.subscribe(function(e,i){y.emit("vuex:mutation",e,i)},{prepend:!0}),t.subscribeAction(function(e,i){y.emit("vuex:action",e,i)},{prepend:!0}))}function b(t,e){Object.keys(t).forEach(function(i){return e(t[i],i)})}function C(t){return t!==null&&typeof t=="object"}function I(t){return t&&typeof t.then=="function"}function v(t,e){if(!t)throw new Error("[vuex] "+e)}function L(t,e){return function(){return t(e)}}var _=function(e,i){this.runtime=i,this._children=Object.create(null),this._rawModule=e;var n=e.state;this.state=(typeof n=="function"?n():n)||{}},V={namespaced:{configurable:!0}};V.namespaced.get=function(){return!!this._rawModule.namespaced},_.prototype.addChild=function(e,i){this._children[e]=i},_.prototype.removeChild=function(e){delete this._children[e]},_.prototype.getChild=function(e){return this._children[e]},_.prototype.hasChild=function(e){return e in this._children},_.prototype.update=function(e){this._rawModule.namespaced=e.namespaced,e.actions&&(this._rawModule.actions=e.actions),e.mutations&&(this._rawModule.mutations=e.mutations),e.getters&&(this._rawModule.getters=e.getters)},_.prototype.forEachChild=function(e){b(this._children,e)},_.prototype.forEachGetter=function(e){this._rawModule.getters&&b(this._rawModule.getters,e)},_.prototype.forEachAction=function(e){this._rawModule.actions&&b(this._rawModule.actions,e)},_.prototype.forEachMutation=function(e){this._rawModule.mutations&&b(this._rawModule.mutations,e)},Object.defineProperties(_.prototype,V);var g=function(e){this.register([],e,!1)};g.prototype.get=function(e){return e.reduce(function(i,n){return i.getChild(n)},this.root)},g.prototype.getNamespace=function(e){var i=this.root;return e.reduce(function(n,r){return i=i.getChild(r),n+(i.namespaced?r+"/":"")},"")},g.prototype.update=function(e){A([],this.root,e)},g.prototype.register=function(e,i,n){var r=this;n===void 0&&(n=!0),process.env.NODE_ENV!=="production"&&P(e,i);var a=new _(i,n);if(e.length===0)this.root=a;else{var s=this.get(e.slice(0,-1));s.addChild(e[e.length-1],a)}i.modules&&b(i.modules,function(l,o){r.register(e.concat(o),l,n)})},g.prototype.unregister=function(e){var i=this.get(e.slice(0,-1)),n=e[e.length-1],r=i.getChild(n);if(!r){process.env.NODE_ENV!=="production"&&console.warn("[vuex] trying to unregister module '"+n+"', which is not registered");return}r.runtime&&i.removeChild(n)},g.prototype.isRegistered=function(e){var i=this.get(e.slice(0,-1)),n=e[e.length-1];return i?i.hasChild(n):!1};function A(t,e,i){if(process.env.NODE_ENV!=="production"&&P(t,i),e.update(i),i.modules)for(var n in i.modules){if(!e.getChild(n)){process.env.NODE_ENV!=="production"&&console.warn("[vuex] trying to add a new module '"+n+"' on hot reloading, manual reload is needed");return}A(t.concat(n),e.getChild(n),i.modules[n])}}var M={assert:function(t){return typeof t=="function"},expected:"function"},U={assert:function(t){return typeof t=="function"||typeof t=="object"&&typeof t.handler=="function"},expected:'function or object with "handler" function'},k={getters:M,mutations:M,actions:U};function P(t,e){Object.keys(k).forEach(function(i){if(e[i]){var n=k[i];b(e[i],function(r,a){v(n.assert(r),q(t,i,a,r,n.expected))})}})}function q(t,e,i,n,r){var a=e+" should be "+r+' but "'+e+"."+i+'"';return t.length>0&&(a+=' in module "'+t.join(".")+'"'),a+=" is "+JSON.stringify(n)+".",a}var m,h=function t(e){var i=this;e===void 0&&(e={}),!m&&typeof window<"u"&&window.Vue&&W(window.Vue),process.env.NODE_ENV!=="production"&&(v(m,"must call Vue.use(Vuex) before creating a store instance."),v(typeof Promise<"u","vuex requires a Promise polyfill in this browser."),v(this instanceof t,"store must be called with the new operator."));var n=e.plugins;n===void 0&&(n=[]);var r=e.strict;r===void 0&&(r=!1),this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new g(e),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._watcherVM=new m,this._makeLocalGettersCache=Object.create(null);var a=this,s=this,l=s.dispatch,o=s.commit;this.dispatch=function(f,p){return l.call(a,f,p)},this.commit=function(f,p,w){return o.call(a,f,p,w)},this.strict=r;var d=this._modules.root.state;N(this,d,[],this._modules.root),S(this,d),n.forEach(function(u){return u(i)});var c=e.devtools!==void 0?e.devtools:m.config.devtools;c&&F(this)},D={state:{configurable:!0}};D.state.get=function(){return this._vm._data.$$state},D.state.set=function(t){process.env.NODE_ENV!=="production"&&v(!1,"use store.replaceState() to explicit replace store state.")},h.prototype.commit=function(e,i,n){var r=this,a=O(e,i,n),s=a.type,l=a.payload,o=a.options,d={type:s,payload:l},c=this._mutations[s];if(!c){process.env.NODE_ENV!=="production"&&console.error("[vuex] unknown mutation type: "+s);return}this._withCommit(function(){c.forEach(function(f){f(l)})}),this._subscribers.slice().forEach(function(u){return u(d,r.state)}),process.env.NODE_ENV!=="production"&&o&&o.silent&&console.warn("[vuex] mutation type: "+s+". Silent option has been removed. Use the filter functionality in the vue-devtools")},h.prototype.dispatch=function(e,i){var n=this,r=O(e,i),a=r.type,s=r.payload,l={type:a,payload:s},o=this._actions[a];if(!o){process.env.NODE_ENV!=="production"&&console.error("[vuex] unknown action type: "+a);return}try{this._actionSubscribers.slice().filter(function(c){return c.before}).forEach(function(c){return c.before(l,n.state)})}catch(c){process.env.NODE_ENV!=="production"&&(console.warn("[vuex] error in before action subscribers: "),console.error(c))}var d=o.length>1?Promise.all(o.map(function(c){return c(s)})):o[0](s);return new Promise(function(c,u){d.then(function(f){try{n._actionSubscribers.filter(function(p){return p.after}).forEach(function(p){return p.after(l,n.state)})}catch(p){process.env.NODE_ENV!=="production"&&(console.warn("[vuex] error in after action subscribers: "),console.error(p))}c(f)},function(f){try{n._actionSubscribers.filter(function(p){return p.error}).forEach(function(p){return p.error(l,n.state,f)})}catch(p){process.env.NODE_ENV!=="production"&&(console.warn("[vuex] error in error action subscribers: "),console.error(p))}u(f)})})},h.prototype.subscribe=function(e,i){return T(e,this._subscribers,i)},h.prototype.subscribeAction=function(e,i){var n=typeof e=="function"?{before:e}:e;return T(n,this._actionSubscribers,i)},h.prototype.watch=function(e,i,n){var r=this;return process.env.NODE_ENV!=="production"&&v(typeof e=="function","store.watch only accepts a function."),this._watcherVM.$watch(function(){return e(r.state,r.getters)},i,n)},h.prototype.replaceState=function(e){var i=this;this._withCommit(function(){i._vm._data.$$state=e})},h.prototype.registerModule=function(e,i,n){n===void 0&&(n={}),typeof e=="string"&&(e=[e]),process.env.NODE_ENV!=="production"&&(v(Array.isArray(e),"module path must be a string or an Array."),v(e.length>0,"cannot register the root module by using registerModule.")),this._modules.register(e,i),N(this,this.state,e,this._modules.get(e),n.preserveState),S(this,this.state)},h.prototype.unregisterModule=function(e){var i=this;typeof e=="string"&&(e=[e]),process.env.NODE_ENV!=="production"&&v(Array.isArray(e),"module path must be a string or an Array."),this._modules.unregister(e),this._withCommit(function(){var n=x(i.state,e.slice(0,-1));m.delete(n,e[e.length-1])}),j(this)},h.prototype.hasModule=function(e){return typeof e=="string"&&(e=[e]),process.env.NODE_ENV!=="production"&&v(Array.isArray(e),"module path must be a string or an Array."),this._modules.isRegistered(e)},h.prototype.hotUpdate=function(e){this._modules.update(e),j(this,!0)},h.prototype._withCommit=function(e){var i=this._committing;this._committing=!0,e(),this._committing=i},Object.defineProperties(h.prototype,D);function T(t,e,i){return e.indexOf(t)<0&&(i&&i.prepend?e.unshift(t):e.push(t)),function(){var n=e.indexOf(t);n>-1&&e.splice(n,1)}}function j(t,e){t._actions=Object.create(null),t._mutations=Object.create(null),t._wrappedGetters=Object.create(null),t._modulesNamespaceMap=Object.create(null);var i=t.state;N(t,i,[],t._modules.root,!0),S(t,i,e)}function S(t,e,i){var n=t._vm;t.getters={},t._makeLocalGettersCache=Object.create(null);var r=t._wrappedGetters,a={};b(r,function(l,o){a[o]=L(l,t),Object.defineProperty(t.getters,o,{get:function(){return t._vm[o]},enumerable:!0})});var s=m.config.silent;m.config.silent=!0,t._vm=new m({data:{$$state:e},computed:a}),m.config.silent=s,t.strict&&K(t),n&&(i&&t._withCommit(function(){n._data.$$state=null}),m.nextTick(function(){return n.$destroy()}))}function N(t,e,i,n,r){var a=!i.length,s=t._modules.getNamespace(i);if(n.namespaced&&(t._modulesNamespaceMap[s]&&process.env.NODE_ENV!=="production"&&console.error("[vuex] duplicate namespace "+s+" for the namespaced module "+i.join("/")),t._modulesNamespaceMap[s]=n),!a&&!r){var l=x(e,i.slice(0,-1)),o=i[i.length-1];t._withCommit(function(){process.env.NODE_ENV!=="production"&&o in l&&console.warn('[vuex] state field "'+o+'" was overridden by a module with the same name at "'+i.join(".")+'"'),m.set(l,o,n.state)})}var d=n.context=B(t,s,i);n.forEachMutation(function(c,u){var f=s+u;X(t,f,c,d)}),n.forEachAction(function(c,u){var f=c.root?u:s+u,p=c.handler||c;z(t,f,p,d)}),n.forEachGetter(function(c,u){var f=s+u;J(t,f,c,d)}),n.forEachChild(function(c,u){N(t,e,i.concat(u),c,r)})}function B(t,e,i){var n=e==="",r={dispatch:n?t.dispatch:function(a,s,l){var o=O(a,s,l),d=o.payload,c=o.options,u=o.type;if((!c||!c.root)&&(u=e+u,process.env.NODE_ENV!=="production"&&!t._actions[u])){console.error("[vuex] unknown local action type: "+o.type+", global type: "+u);return}return t.dispatch(u,d)},commit:n?t.commit:function(a,s,l){var o=O(a,s,l),d=o.payload,c=o.options,u=o.type;if((!c||!c.root)&&(u=e+u,process.env.NODE_ENV!=="production"&&!t._mutations[u])){console.error("[vuex] unknown local mutation type: "+o.type+", global type: "+u);return}t.commit(u,d,c)}};return Object.defineProperties(r,{getters:{get:n?function(){return t.getters}:function(){return H(t,e)}},state:{get:function(){return x(t.state,i)}}}),r}function H(t,e){if(!t._makeLocalGettersCache[e]){var i={},n=e.length;Object.keys(t.getters).forEach(function(r){if(r.slice(0,n)===e){var a=r.slice(n);Object.defineProperty(i,a,{get:function(){return t.getters[r]},enumerable:!0})}}),t._makeLocalGettersCache[e]=i}return t._makeLocalGettersCache[e]}function X(t,e,i,n){var r=t._mutations[e]||(t._mutations[e]=[]);r.push(function(s){i.call(t,n.state,s)})}function z(t,e,i,n){var r=t._actions[e]||(t._actions[e]=[]);r.push(function(s){var l=i.call(t,{dispatch:n.dispatch,commit:n.commit,getters:n.getters,state:n.state,rootGetters:t.getters,rootState:t.state},s);return I(l)||(l=Promise.resolve(l)),t._devtoolHook?l.catch(function(o){throw t._devtoolHook.emit("vuex:error",o),o}):l})}function J(t,e,i,n){if(t._wrappedGetters[e]){process.env.NODE_ENV!=="production"&&console.error("[vuex] duplicate getter key: "+e);return}t._wrappedGetters[e]=function(a){return i(n.state,n.getters,a.state,a.getters)}}function K(t){t._vm.$watch(function(){return this._data.$$state},function(){process.env.NODE_ENV!=="production"&&v(t._committing,"do not mutate vuex store state outside mutation handlers.")},{deep:!0,sync:!0})}function x(t,e){return e.reduce(function(i,n){return i[n]},t)}function O(t,e,i){return C(t)&&t.type&&(i=e,e=t,t=t.type),process.env.NODE_ENV!=="production"&&v(typeof t=="string","expects string as the type, but found "+typeof t+"."),{type:t,payload:e,options:i}}function W(t){if(m&&t===m){process.env.NODE_ENV!=="production"&&console.error("[vuex] already installed. Vue.use(Vuex) should be called only once.");return}m=t,$(m)}var Q=Z(function(t,e){var i={};return process.env.NODE_ENV!=="production"&&!G(e)&&console.error("[vuex] mapState: mapper parameter must be either an Array or an Object"),Y(e).forEach(function(n){var r=n.key,a=n.val;i[r]=function(){var l=this.$store.state,o=this.$store.getters;if(t){var d=ee(this.$store,"mapState",t);if(!d)return;l=d.context.state,o=d.context.getters}return typeof a=="function"?a.call(this,l,o):l[a]},i[r].vuex=!0}),i});function Y(t){return G(t)?Array.isArray(t)?t.map(function(e){return{key:e,val:e}}):Object.keys(t).map(function(e){return{key:e,val:t[e]}}):[]}function G(t){return Array.isArray(t)||C(t)}function Z(t){return function(e,i){return typeof e!="string"?(i=e,e=""):e.charAt(e.length-1)!=="/"&&(e+="/"),t(e,i)}}function ee(t,e,i){var n=t._modulesNamespaceMap[i];return process.env.NODE_ENV!=="production"&&!n&&console.error("[vuex] module namespace not found in "+e+"(): "+i),n}function R(t,e,i,n,r,a,s,l){var o=typeof t=="function"?t.options:t;e&&(o.render=e,o.staticRenderFns=i,o._compiled=!0),n&&(o.functional=!0),a&&(o._scopeId="data-v-"+a);var d;if(s?(d=function(f){f=f||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!f&&typeof __VUE_SSR_CONTEXT__<"u"&&(f=__VUE_SSR_CONTEXT__),r&&r.call(this,f),f&&f._registeredComponents&&f._registeredComponents.add(s)},o._ssrRegister=d):r&&(d=l?function(){r.call(this,(o.functional?this.parent:this).$root.$options.shadowRoot)}:r),d)if(o.functional){o._injectStyles=d;var c=o.render;o.render=function(p,w){return d.call(w),c(p,w)}}else{var u=o.beforeCreate;o.beforeCreate=u?[].concat(u,d):[d]}return{exports:t,options:o}}const te={inject:["formOptions"],props:{section:{type:Object,required:!0}},data(){return{formData:{},defaultNmeaOptions:[["1",this.$t("Predefined string")],["2",this.$t("Predefined coordinates")],["4",this.$t("Serial device")]],dataFormatOptions:[["n",this.$t("NTRIP V1.0")],["h",this.$t("NTRIP v2.0 TCP")],["u",this.$t("NTRIP v2.0 UDP")]],initialDevice:""}},computed:{...Q(["board"]),isGPS(){return this.board.hwinfo.gps},device(){return this.$serial.deviceDisplayValue(this.section.device)},nmeaSourceOptions(){const t=[...this.defaultNmeaOptions];return this.isGPS&&t.push(["3",this.$t("Router GPS device")]),t},serialOptions(){return this.$serial.filterOptions(this.formOptions().serial,this.section.device,this.section,"external")},usedDevice(){return this.formOptions().status.find(t=>t.name===this.section.device&&t.is_used==="1")},noDevice(){return this.$serial.checkForExternalDevice(this.formOptions().device,{device:this.initialDevice})}},methods:{loadInitial(){this.initialDevice=this.section.device},validateNMEA(t){return/^\$[^ ]{2}GGA,.*/.test(t)?{isValid:!0}:{isValid:!1,message:this.$t('"$XXGGA," prefix is required. X represents a random symbol.')}},returnErrorMessage(t){return this.$serial.handleExternalDeviceErrors(t)},validate(){return this.$serial.validateBeforeSave(this.formOptions().status,this.formData.ntrip,"NTrip")}}};var ie=function(){var e=this,i=e._self._c;return i("vuci-form",{attrs:{config:"rs_ntrip",editing:"","after-load":e.loadInitial,"before-save":e.validate},scopedSlots:e._u([{key:"default",fn:function({uciData:n}){return[i("vuci-named-section",{attrs:{endpoints:[{endpoint:"ntrip/config"}],name:e.section.id,title:e.$t("NTRIP instance configuration"),"uci-data":n,"data-key":"ntrip","error-handlers":{edit:e.returnErrorMessage}},scopedSlots:e._u([{key:"default",fn:function({s:r}){return[i("vuci-form-item-switch",{attrs:{"uci-section":r,name:"enabled",label:e.$t("Enable"),rawhtml:"",help:e.$t("Enable service"),readonly:e.$serial.validateServices(e.formOptions().status,r,"NTrip")&&r.enabled==="0"}}),e.noDevice?i("tlt-inline-message",{attrs:{id:"device-not-available",type:"warning",message:e.$serial.returnDisconnectedDeviceError(e.initialDevice)}}):e._e(),e.$serial.validateServices(e.formOptions().status,r,"NTrip")&&r.enabled==="0"?i("tlt-inline-message",{attrs:{id:"device-service-enabled",type:"warning"}},[e._v(" "+e._s(e.$t("Device is already enabled in %s service, disable it").format(e.usedDevice.service))+" "),i("router-link",{attrs:{to:e.$serial.returnPath(e.usedDevice.service),"test-id":"device-service-enabled-link"}},[e._v(" "+e._s(e.$t("here"))+" ")])],1):e._e(),i("vuci-form-item-input",{attrs:{"uci-section":r,label:e.$t("Name"),help:e.$t("Name of serial device"),maxlength:"200",name:"name"}}),i("vuci-form-item-select",{attrs:{"uci-section":r,name:"device",label:e.$t("Serial device"),help:e.$t("Select serial device for data transmission."),options:e.formOptions().device}}),i("vuci-form-item-select",{attrs:{"uci-section":r,label:e.$t("Baud rate"),help:e.$t("Select supported baud rate"),name:"baudrate",options:e.serialOptions.baudRate,initial:"115200"}}),i("vuci-form-item-select",{attrs:{"uci-section":r,label:e.$t("Data bits"),help:e.$t("Select how many bits will be used for character"),name:"databits",options:e.serialOptions.dataBits,initial:"8"}}),i("vuci-form-item-select",{attrs:{"uci-section":r,label:e.$t("Stop bits"),help:e.$t("Select how many stop bits will be used to detect the end of character"),name:"stopbits",options:e.serialOptions.stopBits,initial:"1"}}),i("vuci-form-item-select",{attrs:{"uci-section":r,label:e.$t("Parity"),help:e.$t("Select what kind of parity bit to use for error detection"),name:"parity",options:e.serialOptions.parity,initial:"none"}}),i("vuci-form-item-select",{attrs:{"uci-section":r,label:e.$t("Flow control"),help:e.$t("Select what kind of characters to use for flow control"),name:"flowcontrol",options:e.serialOptions.flowControl,initial:"none"}}),i("vuci-form-item-switch",{attrs:{"uci-section":r,label:e.$t("Full Duplex"),help:e.$t("Check to enable %s Full-Duplex").format(e.device),name:"full_duplex_enabled",depend:r.device==="/dev/rs485"}}),i("vuci-form-item-input",{attrs:{"uci-section":r,name:"ntrip_ip",label:e.$t("Server address"),help:e.$t("NTRIP server address."),rules:"ipv4host",required:r.enabled==="1"}}),i("vuci-form-item-input",{attrs:{"uci-section":r,name:"ntrip_port",label:e.$t("Server port"),help:e.$t("NTRIP server port number."),rules:"port",required:r.enabled==="1"}}),i("vuci-form-item-input",{attrs:{"uci-section":r,name:"ntrip_mount_point",label:e.$t("Mount point"),help:e.$t("NTRIP server mount point."),rules:"string",required:r.enabled==="1",maxlength:"128"}}),i("vuci-form-item-select",{attrs:{"uci-section":r,name:"ntrip_data_format",label:e.$t("Data format"),help:e.$t("NTRIP data format."),options:e.dataFormatOptions}}),i("vuci-form-item-input",{attrs:{"uci-section":r,name:"ntrip_user",label:e.$t("Username"),help:e.$t("NTRIP server username."),rules:"credentials_validate",maxlength:"512"}}),i("vuci-form-item-input",{attrs:{"uci-section":r,name:"ntrip_password",label:e.$t("Password"),help:e.$t("NTRIP server Password."),rules:"credentials_validate",maxlength:"512",password:""}}),i("vuci-form-item-select",{attrs:{"uci-section":r,name:"nmea_source",label:e.$t("NMEA source"),help:e.$t("Select the source of NMEA."),options:e.nmeaSourceOptions}}),i("vuci-form-item-input",{attrs:{"uci-section":r,name:"user_nmea",label:e.$t("NMEA string"),help:e.$t("GGA NMEA string to be used to initiate communication with the server."),depend:r.nmea_source==="1",rules:e.validateNMEA,required:r.enabled==="1"}}),i("vuci-form-item-input",{attrs:{"uci-section":r,name:"lattitude",label:e.$t("Lattitude"),help:e.$t("Lattitude to be used to generate NMEA string for initiating communication with the server."),depend:r.nmea_source==="2",rules:"geofencing(-90.000000,90.000000)",required:r.enabled==="1"}}),i("vuci-form-item-input",{attrs:{"uci-section":r,name:"longitude",label:e.$t("Longitude"),help:e.$t("Longitude to be used to generate NMEA string for initiating communication with the server."),depend:r.nmea_source==="2",rules:"geofencing(-180.000000,180.000000)",required:r.enabled==="1"}}),i("vuci-form-item-input",{attrs:{"uci-section":r,name:"report_interval",label:e.$t("Report interval"),help:e.$t("Period in seconds of how often the NMEA is sent to server."),rules:"irange(1, 86400)",initial:"10"}})]}}],null,!0)})]}}]),model:{value:e.formData,callback:function(n){e.formData=n},expression:"formData"}})},re=[],ne=R(te,ie,re,!1,null,null,null,null);const oe=ne.exports,ae={provide(){return{formOptions:this.getFormOptions}},data(){return{formData:{},editModal:oe,formOptions:{serial:[],device:[],status:[]},deviceColumns:[{name:"name",label:this.$t("Name")},{name:"device",label:this.$t("Device")},{name:"enabled",label:this.$t("Enabled")}]}},computed:{devices(){return this.$serial.filterDevices(this.formOptions.serial)}},methods:{noDevice(t){return this.$serial.checkForExternalDevice(this.devices,t)},displayDevices(t){return this.$serial.deviceDisplayValue(t)},getFormOptions(){return this.formOptions},loadDevices(){const t=["/api/system/device/status","/api/serial/status"];return this.$axios.bulkGet(t).then(([e,i])=>{this.formOptions.serial=e.success&&e.data.board.serial?e.data.board.serial:[],this.formOptions.device=this.devices,this.formOptions.status=i.success?i.data:[],e.success||this.$message.error(this.$t("Failed to load serial data")),i.success||this.$message.error(this.$t("Failed to load rs serial status"))}).catch(()=>{this.$message.error(this.$t("An unexpected error occurred"))})},returnErrorMessage(t){return this.$serial.handleExternalDeviceErrors(t)},deviceUnavailable(){return this.$t("Device is unavailable")},onAdd(t,e){return{valid:e.length<20,message:this.$t("Cannot create more instances. Only 20 instances are allowed")}},validate(){return new Promise((t,e)=>{const i=this.$serial.validateBeforeSave(this.formOptions.status,this.formData.ntrip,"NTrip",!1),n=this.formData.ntrip.some(r=>r.enabled==="1"&&(!r.ntrip_ip||!r.ntrip_port||r.nmea_source==="1"&&!r.user_nmea||r.nmea_source==="2"&&(!r.longitude||!r.latitude)||!r.ntrip_mount_point));if(!i.isValid)return e(i.message);if(n)return e(this.$t("The service cannot be enabled due to missing essential configuration options. Navigate to the edit modal to update your configuration before attempting to enable the service"));t()})}}};var se=function(){var e=this,i=e._self._c;return i("vuci-form",{attrs:{config:"rs_ntrip","after-load":e.loadDevices,"before-save":e.validate},scopedSlots:e._u([{key:"default",fn:function({uciData:n}){return[i("vuci-typed-section",{attrs:{"uci-data":n,type:"ntrip","data-key":"ntrip",title:e.$t("NTRIP Configuration"),endpoints:[{endpoint:"ntrip/config"}],columns:e.deviceColumns,"edit-form":e.editModal,"error-handlers":{edit:e.returnErrorMessage,create:e.deviceUnavailable},"add-validate":e.onAdd},scopedSlots:e._u([{key:"name",fn:function({s:r}){return[i("vuci-form-item-dummy",{attrs:{"uci-section":r,name:"name"}})]}},{key:"device",fn:function({s:r}){return[i("vuci-form-item-dummy",{attrs:{"uci-section":r,name:"device","display-value":e.displayDevices}})]}},{key:"enabled",fn:function({s:r}){return[i("tlt-hint",{attrs:{rawhtml:"",hints:(e.$serial.validateServices(e.formOptions.status,r,"NTrip")||e.noDevice(r))&&(r.enabled==="0"||!r.enabled)?[{info:e.$serial.filterError(e.formOptions.status,r,e.devices)}]:[]}},[i("vuci-form-item-switch",{attrs:{"uci-section":r,name:"enabled",readonly:(e.$serial.validateServices(e.formOptions.status,r,"NTrip")||e.noDevice(r))&&(r.enabled==="0"||!r.enabled)}})],1)]}},{key:"addForm",fn:function({addModel:r}){return[i("tlt-form-item-input",{attrs:{label:e.$t("New configuration name"),prop:"name",maxlength:"200",help:e.$t("Name of the new RS NTRIP configuration. Used for easier configurations management purpose only")},model:{value:r.name,callback:function(a){e.$set(r,"name",a)},expression:"addModel.name"}}),i("tlt-form-item-select",{attrs:{label:e.$t("Device name"),prop:"device",options:e.devices,placeholder:e.$t("Serial device is unavailable"),help:e.$t("Device that is bound to the created section. Routers serial ports or USB port with a serial adapter attached can be used."),required:""},model:{value:r.device,callback:function(a){e.$set(r,"device",a)},expression:"addModel.device"}})]}}],null,!0)})]}}]),model:{value:e.formData,callback:function(n){e.formData=n},expression:"formData"}})},ce=[],ue=R(ae,se,ce,!1,null,null,null,null);return ue.exports});
