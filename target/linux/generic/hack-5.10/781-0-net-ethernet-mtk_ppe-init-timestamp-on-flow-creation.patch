New FOE entries were being created with timestamp value of 0, resulting in
incorrect idle time calculations on flows that were yet to be bound to the
hw FOE table (e.g., flows that didn't exceed minimum pps for offloading).

Initialize new FOE entries with the current timestamp to fix the issue.

--- a/drivers/net/ethernet/mediatek/mtk_ppe.c
+++ b/drivers/net/ethernet/mediatek/mtk_ppe.c
@@ -156,11 +156,12 @@ mtk_foe_entry_ib2(struct mtk_foe_entry *
 	return &entry->ipv4.ib2;
 }
 
-int mtk_foe_entry_prepare(struct mtk_foe_entry *entry, int type, int l4proto,
+int mtk_foe_entry_prepare(struct mtk_eth *eth, struct mtk_foe_entry *entry, int type, int l4proto,
 			  u8 pse_port, u8 *src_mac, u8 *dest_mac)
 {
 	struct mtk_foe_mac_info *l2;
 	u32 ports_pad, val;
+	u16 timestamp = mtk_eth_timestamp(eth);
 
 	memset(entry, 0, sizeof(*entry));
 
@@ -168,7 +169,8 @@ int mtk_foe_entry_prepare(struct mtk_foe
 	      FIELD_PREP(MTK_FOE_IB1_PACKET_TYPE, type) |
 	      FIELD_PREP(MTK_FOE_IB1_UDP, l4proto == IPPROTO_UDP) |
 	      MTK_FOE_IB1_BIND_TTL |
-	      MTK_FOE_IB1_BIND_CACHE;
+	      MTK_FOE_IB1_BIND_CACHE |
+	      FIELD_PREP(MTK_FOE_IB1_BIND_TIMESTAMP, timestamp);
 	entry->ib1 = val;
 
 	val = FIELD_PREP(MTK_FOE_IB2_PORT_MG, 0x3f) |
--- a/drivers/net/ethernet/mediatek/mtk_ppe.h
+++ b/drivers/net/ethernet/mediatek/mtk_ppe.h
@@ -313,8 +313,9 @@ mtk_foe_entry_timestamp(struct mtk_ppe *
 	return FIELD_GET(MTK_FOE_IB1_BIND_TIMESTAMP, ib1);
 }
 
-int mtk_foe_entry_prepare(struct mtk_foe_entry *entry, int type, int l4proto,
-			  u8 pse_port, u8 *src_mac, u8 *dest_mac);
+int mtk_foe_entry_prepare(struct mtk_eth *eth, struct mtk_foe_entry *entry,
+			  int type, int l4proto, u8 pse_port, u8 *src_mac,
+			  u8 *dest_mac);
 int mtk_foe_entry_set_pse_port(struct mtk_foe_entry *entry, u8 port);
 int mtk_foe_entry_set_ipv4_tuple(struct mtk_foe_entry *entry, bool orig,
 				 __be32 src_addr, __be16 src_port,
--- a/drivers/net/ethernet/mediatek/mtk_ppe_offload.c
+++ b/drivers/net/ethernet/mediatek/mtk_ppe_offload.c
@@ -334,7 +334,7 @@ mtk_flow_offload_replace(struct mtk_eth
 	    !is_valid_ether_addr(data.eth.h_dest))
 		return -EINVAL;
 
-	err = mtk_foe_entry_prepare(&foe, offload_type, l4proto, 0,
+	err = mtk_foe_entry_prepare(eth, &foe, offload_type, l4proto, 0,
 				    data.eth.h_source,
 				    data.eth.h_dest);
 	if (err)
